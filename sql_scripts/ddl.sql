-- Create tables to hold the data

-- ACS 2009-2013 5 Year Estimates
CREATE TABLE IF NOT EXISTS e20135us0015000 (
    fileid varchar (6) NOT NULL,
    filetype varchar (6) NOT NULL,
    stusab varchar (2) NOT NULL,
    chariter varchar (3) NOT NULL,
    sequence varchar (4) NOT NULL,
    logrecno varchar (7) NOT NULL,
    PRIMARY KEY (logrecno),
    B06010_001 integer,
    B06010_002 integer,
    B06010_003 integer,
    B06010_004 integer,
    B06010_005 integer,
    B06010_006 integer,
    B06010_007 integer,
    B06010_008 integer,
    B06010_009 integer,
    B06010_010 integer,
    B06010_011 integer,
    B06010_012 integer,
    B06010_013 integer,
    B06010_014 integer,
    B06010_015 integer,
    B06010_016 integer,
    B06010_017 integer,
    B06010_018 integer,
    B06010_019 integer,
    B06010_020 integer,
    B06010_021 integer,
    B06010_022 integer,
    B06010_023 integer,
    B06010_024 integer,
    B06010_025 integer,
    B06010_026 integer,
    B06010_027 integer,
    B06010_028 integer,
    B06010_029 integer,
    B06010_030 integer,
    B06010_031 integer,
    B06010_032 integer,
    B06010_033 integer,
    B06010_034 integer,
    B06010_035 integer,
    B06010_036 integer,
    B06010_037 integer,
    B06010_038 integer,
    B06010_039 integer,
    B06010_040 integer,
    B06010_041 integer,
    B06010_042 integer,
    B06010_043 integer,
    B06010_044 integer,
    B06010_045 integer,
    B06010_046 integer,
    B06010_047 integer,
    B06010_048 integer,
    B06010_049 integer,
    B06010_050 integer,
    B06010_051 integer,
    B06010_052 integer,
    B06010_053 integer,
    B06010_054 integer,
    B06010_055 integer,
    B06010PR_001 integer,
    B06010PR_002 integer,
    B06010PR_003 integer,
    B06010PR_004 integer,
    B06010PR_005 integer,
    B06010PR_006 integer,
    B06010PR_007 integer,
    B06010PR_008 integer,
    B06010PR_009 integer,
    B06010PR_010 integer,
    B06010PR_011 integer,
    B06010PR_012 integer,
    B06010PR_013 integer,
    B06010PR_014 integer,
    B06010PR_015 integer,
    B06010PR_016 integer,
    B06010PR_017 integer,
    B06010PR_018 integer,
    B06010PR_019 integer,
    B06010PR_020 integer,
    B06010PR_021 integer,
    B06010PR_022 integer,
    B06010PR_023 integer,
    B06010PR_024 integer,
    B06010PR_025 integer,
    B06010PR_026 integer,
    B06010PR_027 integer,
    B06010PR_028 integer,
    B06010PR_029 integer,
    B06010PR_030 integer,
    B06010PR_031 integer,
    B06010PR_032 integer,
    B06010PR_033 integer,
    B06010PR_034 integer,
    B06010PR_035 integer,
    B06010PR_036 integer,
    B06010PR_037 integer,
    B06010PR_038 integer,
    B06010PR_039 integer,
    B06010PR_040 integer,
    B06010PR_041 integer,
    B06010PR_042 integer,
    B06010PR_043 integer,
    B06010PR_044 integer,
    B06010PR_045 integer,
    B06010PR_046 integer,
    B06010PR_047 integer,
    B06010PR_048 integer,
    B06010PR_049 integer,
    B06010PR_050 integer,
    B06010PR_051 integer,
    B06010PR_052 integer,
    B06010PR_053 integer,
    B06010PR_054 integer,
    B06010PR_055 integer,
    B06011_001 integer,
    B06011_002 integer,
    B06011_003 integer,
    B06011_004 integer,
    B06011_005 integer,
    B06011PR_001 integer,
    B06011PR_002 integer,
    B06011PR_003 integer,
    B06011PR_004 integer,
    B06011PR_005 integer,
    B06012_001 integer,
    B06012_002 integer,
    B06012_003 integer,
    B06012_004 integer,
    B06012_005 integer,
    B06012_006 integer,
    B06012_007 integer,
    B06012_008 integer,
    B06012_009 integer,
    B06012_010 integer,
    B06012_011 integer,
    B06012_012 integer,
    B06012_013 integer,
    B06012_014 integer,
    B06012_015 integer,
    B06012_016 integer,
    B06012_017 integer,
    B06012_018 integer,
    B06012_019 integer,
    B06012_020 integer,
    B06012PR_001 integer,
    B06012PR_002 integer,
    B06012PR_003 integer,
    B06012PR_004 integer,
    B06012PR_005 integer,
    B06012PR_006 integer,
    B06012PR_007 integer,
    B06012PR_008 integer,
    B06012PR_009 integer,
    B06012PR_010 integer,
    B06012PR_011 integer,
    B06012PR_012 integer,
    B06012PR_013 integer,
    B06012PR_014 integer,
    B06012PR_015 integer,
    B06012PR_016 integer,
    B06012PR_017 integer,
    B06012PR_018 integer,
    B06012PR_019 integer,
    B06012PR_020 integer
);

-- ACS 2009-2013 5 Year MoE's
CREATE TABLE IF NOT EXISTS m20135us0015000 (
    fileid varchar (5) NOT NULL,
    filetype varchar (9) NOT NULL,
    stusab varchar (2) NOT NULL,
    chariter varchar (3) NOT NULL,
    sequence varchar (4) NOT NULL,
    logrecno varchar (7) NOT NULL,
    PRIMARY KEY (logrecno),
    B06010_001 integer,
    B06010_002 integer,
    B06010_003 integer,
    B06010_004 integer,
    B06010_005 integer,
    B06010_006 integer,
    B06010_007 integer,
    B06010_008 integer,
    B06010_009 integer,
    B06010_010 integer,
    B06010_011 integer,
    B06010_012 integer,
    B06010_013 integer,
    B06010_014 integer,
    B06010_015 integer,
    B06010_016 integer,
    B06010_017 integer,
    B06010_018 integer,
    B06010_019 integer,
    B06010_020 integer,
    B06010_021 integer,
    B06010_022 integer,
    B06010_023 integer,
    B06010_024 integer,
    B06010_025 integer,
    B06010_026 integer,
    B06010_027 integer,
    B06010_028 integer,
    B06010_029 integer,
    B06010_030 integer,
    B06010_031 integer,
    B06010_032 integer,
    B06010_033 integer,
    B06010_034 integer,
    B06010_035 integer,
    B06010_036 integer,
    B06010_037 integer,
    B06010_038 integer,
    B06010_039 integer,
    B06010_040 integer,
    B06010_041 integer,
    B06010_042 integer,
    B06010_043 integer,
    B06010_044 integer,
    B06010_045 integer,
    B06010_046 integer,
    B06010_047 integer,
    B06010_048 integer,
    B06010_049 integer,
    B06010_050 integer,
    B06010_051 integer,
    B06010_052 integer,
    B06010_053 integer,
    B06010_054 integer,
    B06010_055 integer,
    B06010PR_001 integer,
    B06010PR_002 integer,
    B06010PR_003 integer,
    B06010PR_004 integer,
    B06010PR_005 integer,
    B06010PR_006 integer,
    B06010PR_007 integer,
    B06010PR_008 integer,
    B06010PR_009 integer,
    B06010PR_010 integer,
    B06010PR_011 integer,
    B06010PR_012 integer,
    B06010PR_013 integer,
    B06010PR_014 integer,
    B06010PR_015 integer,
    B06010PR_016 integer,
    B06010PR_017 integer,
    B06010PR_018 integer,
    B06010PR_019 integer,
    B06010PR_020 integer,
    B06010PR_021 integer,
    B06010PR_022 integer,
    B06010PR_023 integer,
    B06010PR_024 integer,
    B06010PR_025 integer,
    B06010PR_026 integer,
    B06010PR_027 integer,
    B06010PR_028 integer,
    B06010PR_029 integer,
    B06010PR_030 integer,
    B06010PR_031 integer,
    B06010PR_032 integer,
    B06010PR_033 integer,
    B06010PR_034 integer,
    B06010PR_035 integer,
    B06010PR_036 integer,
    B06010PR_037 integer,
    B06010PR_038 integer,
    B06010PR_039 integer,
    B06010PR_040 integer,
    B06010PR_041 integer,
    B06010PR_042 integer,
    B06010PR_043 integer,
    B06010PR_044 integer,
    B06010PR_045 integer,
    B06010PR_046 integer,
    B06010PR_047 integer,
    B06010PR_048 integer,
    B06010PR_049 integer,
    B06010PR_050 integer,
    B06010PR_051 integer,
    B06010PR_052 integer,
    B06010PR_053 integer,
    B06010PR_054 integer,
    B06010PR_055 integer,
    B06011_001 integer,
    B06011_002 integer,
    B06011_003 integer,
    B06011_004 integer,
    B06011_005 integer,
    B06011PR_001 integer,
    B06011PR_002 integer,
    B06011PR_003 integer,
    B06011PR_004 integer,
    B06011PR_005 integer,
    B06012_001 integer,
    B06012_002 integer,
    B06012_003 integer,
    B06012_004 integer,
    B06012_005 integer,
    B06012_006 integer,
    B06012_007 integer,
    B06012_008 integer,
    B06012_009 integer,
    B06012_010 integer,
    B06012_011 integer,
    B06012_012 integer,
    B06012_013 integer,
    B06012_014 integer,
    B06012_015 integer,
    B06012_016 integer,
    B06012_017 integer,
    B06012_018 integer,
    B06012_019 integer,
    B06012_020 integer,
    B06012PR_001 integer,
    B06012PR_002 integer,
    B06012PR_003 integer,
    B06012PR_004 integer,
    B06012PR_005 integer,
    B06012PR_006 integer,
    B06012PR_007 integer,
    B06012PR_008 integer,
    B06012PR_009 integer,
    B06012PR_010 integer,
    B06012PR_011 integer,
    B06012PR_012 integer,
    B06012PR_013 integer,
    B06012PR_014 integer,
    B06012PR_015 integer,
    B06012PR_016 integer,
    B06012PR_017 integer,
    B06012PR_018 integer,
    B06012PR_019 integer,
    B06012PR_020 integer
);

-- Geographic data
CREATE TABLE IF NOT EXISTS g20135us (
    fileid varchar(6),
    stusab varchar(2),
    sumlevel varchar(3),
    component varchar(2),
    logrecno varchar(7),
    PRIMARY KEY (logrecno),
    us varchar(1),
    region varchar(1),
    division varchar(1),
    statece varchar(2),
    state varchar(2),
    county varchar(3),
    cousub varchar(5),
    place varchar(5),
    tract varchar(6),
    blkgrp varchar(1),
    concit varchar(5),
    aianhh varchar(4),
    aianhhfp varchar(5),
    aihhtli varchar(1),
    aitsce varchar(3),
    aits varchar(5),
    anrc varchar(5),
    cbsa varchar(5),
    csa varchar(3),
    metdiv varchar(5),
    macc varchar(1),
    memi varchar(1),
    necta varchar(5),
    cnecta varchar(3),
    nectadiv varchar(5),
    ua varchar(5),
    blank_1 varchar(5),
    cdcurr varchar(2),
    sldu varchar(3),
    sldl varchar(3),
    blank_2 varchar(6),
    blank_3 varchar(3),
    zcta5 varchar(5),
    submcd varchar(5),
    sdelm varchar(5),
    sdsec varchar(5),
    sduni varchar(5),
    ur varchar(1),
    pci varchar(1),
    blank_4 varchar(6),
    blank_5 varchar(5),
    puma5 varchar(5),
    blank_6 varchar(5),
    geoid varchar(40),
    name varchar(1000),
    bttr varchar(6),
    btbg varchar(1),
    blank_7 varchar(44)
);
CREATE INDEX IF NOT EXISTS g20135us_zcta5_idx ON g20135us (zcta5);

-- Consumer Complaints database
CREATE TABLE IF NOT EXISTS ccdb (
    id SERIAL,
    date_received date,
    product text,
    sub_product text,
    issue text,
    sub_issue text,
    narrative text,
    company_response_public text,
    company text,
    state varchar(2),
    zip_code varchar(5),
    tags text,
    consumer_consent_provided text,
    submitted_via text,
    date_sent_to_company date,
    company_response_consumer text,
    timely_response text,
    consumer_disputed text,
    complaint_id integer,
    PRIMARY KEY (id)
);
CREATE INDEX IF NOT EXISTS ccdb_zip_code_idx ON ccdb (zip_code);
CREATE INDEX IF NOT EXISTS ccdb_complaint_id_idx ON ccdb (complaint_id);
